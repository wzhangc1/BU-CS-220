# Lab08 - X86 Addressing Modes

## Background

We've been learning about X86 assembler. In order to master X86 assembler, we need to become familiar with the ways in which arguments to X86 assembler instructions can reference memory, known as X86 assembler addressing modes. We started the discussion of X86 addressing modes in [Lecture 10](http://www.cs.binghamton.edu/~tbartens/CS220_Spring_2019/lectures/L10_ISA_Instructions.pdf), slides 19-21. We also talked in lecture yesterday about the table addressing mode in slides 36-41. In this lab, we provide some basic C code that gets translated into X86 assembler by the gcc compiler that uses these addressing modes. The lab also contains a text file called **lab08_questions.txt** that has a series of questions about the generated X86 assembler. Your job today is to answer those questions. You may be able to do so just by looking at the generated X86 assembler (the Makefile provided has a target to create the X86 assembler with interspersed C code), or you may wish to walk through the instructions using the gdb assembler, where you have an opportunity to look at the values in registers and memory as well as single step through the X86 assembler instructions.

## Files Provided to You

The lab08 repository comes with several files provided for you, as follows:

- **x86mem.c** : This file contains a single `main` function with some very simple C code. Please do not modify this file. The questions you need to answer for this lab assume you have compiled unmodified code in x86mem.c. Feel free to look at the code and get an idea of what is going on. (Note that the code in x86mem.c does not do anything useful... it is provided only to demonstrate some of the ways the C compiler uses X86 addressing modes.)

- **Makefile** : A file to provide rules for the make command. The Makefile contains rules to create the x86mem binary executable file, as well as to dump that file using the `objdump` command to see the X86 assembler generated by the compiler. Since the x86mem binary was generated with the -g flag, it has debug information which enables objdump to intersperse the C lines of code as comments in the X86 assembler output, so you can follow what is going on. The Makefile also contains a `gdb` target, which runs the commands in gdb_cmds.txt, and runs on the x86mem executable file.

- **gdb_cmds.txt** : A file which contains gdb commands to be run after loading the x86mem executable file under gdb, used in the Makefile for the `gdb` target.

- **lab08_questions.txt** : A file which contains a list of questions. For this lab, you should edit this file and provide the answers to the questions in this text file.

## Working the Lab

After you have cloned your repository, run `make x86mem.s`. and edit the result along with lab08_questions.txt. Start answering the questions in lab08_questions.txt. If you get stuck, try running `make gdb` and running under gdb to see what is going on. (You may want to modify the commands in gdb_cmds.txt to work on a specific problem.)

When the questions in lab08_questions.txt ask "what value was put in %eax" (or some similar register), please specify your answer in terms of the variables in the C code, or as C expressions which use the relevant C variables.

## Submitting the Lab

One you have answered all the questions in **lab08_questions.txt**, save the file with your answers, commit the changes to the file, and push those changes to the cloud. Cut and paste the resulting hashCode into the Lab 08 submission area in the Lab Submissions folder under Content for CS-220 in myCourses. You may submit as many times as you wish up to the deadline of midnight tonight (Mar. 26), only the last submission will be graded.

## Grading your Submission

Each numbered question in **lab08_questions.txt** counts for two points. Any sub-question answered incorrectly will result in a one-point deduction. If more than half of the sub-questions are answered incorrectly, two points will be deducted.
